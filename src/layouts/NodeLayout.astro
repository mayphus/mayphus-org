---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import SiteHeader from '../components/SiteHeader.astro';
import Footer from '../components/Footer.astro';

type Props = CollectionEntry<'content'>['data'] & {
  children?: any;
};

const { title = 'Untitled', filetags, date } = Astro.props;
const isoDate = date ? date.toISOString().split('T')[0] : undefined;
const displayDate = date
  ? date.toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
    })
  : undefined;
---

<html lang="en">
  <head>
    <BaseHead title={title} description="mayphus tang's digital workshop" />
  </head>

  <body class="paper-body">
    <SiteHeader />
    <main id="main" class="org-content" role="main">
      <header class="paper-article__header">
        <p class="paper-article__kicker">Mayphus Tang Â· Digital Workshop Journal</p>
        <h1>{title}</h1>
        {(displayDate || (filetags && filetags.length > 0)) && (
          <dl class="paper-article__meta">
            {displayDate && isoDate && (
              <div>
                <dt>Published</dt>
                <dd>
                  <time datetime={isoDate}>{displayDate}</time>
                </dd>
              </div>
            )}
            {filetags && filetags.length > 0 && (
              <div>
                <dt>Keywords</dt>
                <dd>{filetags.join(', ')}</dd>
              </div>
            )}
          </dl>
        )}
      </header>
      <section class="paper-article__content">
        <slot />
      </section>
      <Footer />
    </main>
  </body>
</html>
